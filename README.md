This is a lightweight computational fluid dynamics code that solves the compressible Euler equations in 1D, 2D, or 3D using a conservative finite volume method on a Cartesian mesh. In order to achieve second-order accuracy in space and time, it uses MUSCL-Hancock reconstruction, and numerical fluxes are calculated using the HLLC approximate Riemann solver. Currently, only the ideal gas equation of state is implemented, but this can easily be extended. Boundaries can be transmissive, reflective, or periodic and parallelism is supported via OpenMP.

There are five important settings for the code, all found in Macros.H. Firstly, USE_OMP determines whether the code is compiled with OpenMP support. Secondly, REAL determines which level of precision the code uses for floating point numbers (double by default, unlikely to change). GRIDDIM and SPACEDIM specify the number of spatial dimensions of the problem. Here, GRIDDIM is the dimensionality of the domain, while SPACEDIM is the dimensionality of the velocity vector. In general, they should be set to the same value, although SPACEDIM > GRIDDIM is also allowed. Finally, USE_RIGID determines whether the code is compiled with support for rigid bodies.

Once the settings in Macros.H have been set, the relevant test case for the chosen dimensionality (Sod test for 1D, cylindrical explosion, Kelvin-Helmholtz instability, and shock reflection from a wedge for 2D, and spherical explosion for 3D) can be run and plotted using runTests.bash. Here, the desired number of OpenMP threads can also be set.

Alternatively, if a data file is available (e.g., generated by a script or as output from a previous run), the simulation can be started from this data file. For this, we need to create a settings file with the following layout:

initial-data-file-name
final-data-file-name
final-time
low-boundary-conditions
high-boundary-conditions
[gamma]
[signed-distance-function-file-name]

Here, initial-data-file-name is the name of the data file from which the simulation starts, final-data-file-name is the name of the file to which the simulation result will be written, final-time is the time until which the simulation will run. low-boundary-conditions and high-boundary-conditions are the boundary conditions on the low and high sides of the domain, each encoded by GRIDDIM integers (0 for transmissive, 1 for reflective, and 2 for periodic) separated by whitespaces. gamma is an optional argument specifying the adiabatic index to be used in the ideal gas equation of state (1.4 by default). signed-distance-function-file-name is another optional argument, which will be used to define the rigid body in the problem, if provided (and compiled with USE_RIGID). Here, the boundary of the rigid body is taken to be the zero contour of the signed distance function, and negative values correspond to the inside of the rigid body. It is worth noting that the signed distance function has to be provided for one cell outside the valid domain.

These settings files, the intial data, and the signed distance functions can of course be generated by a script. shock_reflection.py provides an example of such a script, which sets up, runs, and plots the shock reflection problem.

As it stands, the biggest shortcoming of the code is that reading and writing data is extremely slow, especially in higher dimensions. This could be remedied by working with binary data directly instead of creating text files. However, this should ideally be done in such a way that the data can still be written and read by a Python script. Another possible improvement to the code would be averaging procedures to more accurately prescribe initial conditions. The lack of these methods leads to start-up errors, which can, for example, be observed in the cylindrical and spherical explosions in the parts of the contact discontinuity that are perpendicular to the axes.
