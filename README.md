This is a lightweight CFD code that solves the compressible Euler equations in 1D, 2D, or 3D using a conservative finite volume method on a Cartesian mesh. In order to achieve second-order accuracy in space and time, it uses MUSCL-Hancock reconstruction, and numerical fluxes are calculated using the HLLC approximate Riemann solver. Currently, only the ideal gas equation of state is implemented, but this can easily be extended. Boundaries can be transmissive, reflective, or periodic and parallelism is supported via OpenMP.

There are four important settings for the code, all found in Macros.H. Firstly, USE_OMP determines whether the code is compiled with OpenMP support. Secondly, REAL determines which level of precision the code uses for floating point numbers (double by default, unlikely to change). Finally, GRIDDIM and SPACEDIM specify the number of spatial dimensions of the problem. Here, GRIDDIM is the dimensionality of the domain, while SPACEDIM is the dimensionality of the velocity vector. In general, they should be set to the same value, although SPACEDIM > GRIDDIM is also allowed.

Once the settings in Macros.H have been set, the relevant test case for the chosen dimensionality (Sod test for 1D, cylindrical explosion and Kelvin-Helmholtz instability for 2D, and spherical explosion for 3D) can be run and plotted using run.bash. Here, the desired number of OpenMP threads can also be set.

Alternatively, if an output file is available (e.g., from a previous run), the simulation can be started from this output file using the following command: ./simple-cfd start-file-name final-file-name final-time low-boundary-conditions high-boundary-conditions [gamma]. As the name of the argument suggests, start-file-name is the name of the file from which the simulation will start. final-file-name is the name of the file to which the simulation output will be written. final-time is the time until which the simulation will run. low-boundary-conditions and high-boundary-conditions are the boundary conditions on the low and high sides of the domain, each encoded by GRIDDIM integers (0 for transmissive, 1 for reflective, and 2 for periodic) separated by whitespaces. gamma is an optional argument specifying the adiabatic index to be used in the ideal gas equation of state (1.4 by default).

As it stands, the biggest shortcoming of the code is that outputting data is extremely slow, especially in higher dimensions. This could be remedied by outputting binary data directly instead of creating text files. However, this should ideally be done in such a way that the data can still be read into a Python script for plotting.

In order to further improve the code, it would be interesting to add support for rigid bodies. Also, support for settings files specifying domain extents, resolution, boundary conditions, equation of state, and initial data would be nice to have. In order to specify initial data and rigid body shapes, it could be nice to use the same format as the output from the code (as discussed in the previous paragraph), such that simulations can be re-started easily. If this format is compatible with Python, a Python script could also be used to generate the initial data and rigid body signed distance function. On a slightly more boring note, averaging procedures to more accurately prescribe initial conditions should be implemented. The lack of these methods leads to start-up errors, which can, for example, be observed in the cylindrical and spherical explosions in the parts of the contact discontinuity that are perpendicular to the axes.

It is worth noting, by the way, that this code was developed in approximately 14 hours of work.
